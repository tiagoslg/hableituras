{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'sentdesc/style.css' %}" />
<link rel="stylesheet" type="text/css" href="{% static 'sentdesc/jquery.dataTables.min.css' %}" />
<!--- <script src="{% static 'sentdesc/jquery-1.12.4.js' %}" type="text/javascript"></script> --->
<script src="{% static 'sentdesc/jquery-3.1.1.min.js' %}" type="text/javascript"></script>
<script src="{% static 'sentdesc/jquery.dataTables.min.js' %}" type="text/javascript"></script>
<script type='text/javascript'>
$(document).ready(function(){
// Define as variaveis de acordo com a quantidade da página // opcional.
	$('#example').DataTable();
	
	$(document).on('click', '.botaoEditar', function(){
        var detalhe = $(this).data('editar');
        $('#form-detalhe').load(detalhe);
		$('#form-conteudo').css("visibility", "visible");
    });

});
</script>

<div id="container">
	<div id="header">
		<div id="branding">
		<h1><a href="{% url 'sentdesc:index' %}">Filtro de Sentenças Descritoras</a></h1>
		</div>
		<div id="user-tools"
		{% if request.user.is_authenticated %}
		<p> você está logado como {{ request.user.username }} | <a href="{% url 'logout' %}">Sair </a></p>
		{% else %}
		<p><a href="{% url 'login' %}">Acessar o sistema</a></p>
		{% endif %}
		</div>
	</div>
	<div id="content">
		{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

		<form action="#" method="get">
		<select name="fonte_filtro">
		 <option value="origem">Origem da sentença</option>
		 <option value="sentenca_descritora">Sentença Descritora</option>
		 <option value="1">Elemento do Texto</option>
		 <option value="2">Objetivo de Aprendizagem</option>
		 <option value="3">Tipo de Gênero</option>
		</select>
		<input type="text" name="texto_filtro" />
		<input type="submit" value="filtrar" />
		</form>

		{% if ordered_sentdesc_list %}
			<table id="example" class="display" cellspacing="0" width="100%" border="1">
				<thead>
					<tr>
						<th>#</th>
						<th>Origem</th>
						<th>Sentença Descritora</th>
				{% for atributo in total_atributos %}
					<th>{{ atributo.atributo }}</th>
				{% endfor %}
					<th>&nbsp;</th>
					</tr>
				</thead>
				<tfoot>
					<tr>
						<th>#</th>
						<th>Origem</th>
						<th>Sentença Descritora</th>
				{% for atributo in total_atributos %}
					<th>{{ atributo.atributo }}</th>
				{% endfor %}
					<th>&nbsp;</th>
					</tr>
				</tfoot>
				<tbody>
				{% for habilidade in total_habilidades %}
					<tr>
						<td>{{ habilidade.id }}</td>
						<td>{{ habilidade.origem }}</td>
						<td>{{ habilidade.sent_desc }}</td>
					{% for sentdesc in ordered_sentdesc_list %}
						{% if habilidade.id == sentdesc.habilidades.id %}
							<td>{{ sentdesc.valor }}</td>			
						{% endif %}
					{% endfor %}
						<td>
						<button type="button" data-editar="{% url 'sentdesc:detalhe_teste' habilidade.id %}" class="botaoEditar">Editar</button>
						</td>
					</tr>
				{% endfor %}
				</tbody>
			</table>
		{% else %}
			<p>Nenhuma Sentença Descritora equivale ao filtro selecionado.</p>
		{% endif %}
	</div>
	<div id="form-conteudo">
		<div id="form-detalhe">
		content
		</div>
	</div>
</div>